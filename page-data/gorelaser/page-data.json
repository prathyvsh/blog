{"componentChunkName":"component---src-templates-blog-post-js","path":"/gorelaser/","result":{"data":{"site":{"id":"Site","siteMetadata":{"title":"dayDreams ++","author":"Athul Cyriac Ajay"}},"markdownRemark":{"id":"6b826c65-7b94-55fc-90aa-e6bc4dfca0ca","excerpt":"Past Month, I’ve been wworking on Shelby a lot. I had set up my CI pipeline using Travis CI by a  file from Powerline Go.I used a shell script from Mimir’s…","html":"<p>Past Month, I’ve been wworking on Shelby a lot. I had set up my CI pipeline using <a href=\"https://travis-ci.org/\">Travis CI</a> by a <code class=\"language-text\">.travis.yml</code> file from <a href=\"https://github.com/justjanne/powerline-go\">Powerline Go</a>.I used a shell script from <a href=\"https://github.com/talal/mimir\">Mimir</a>’s documentaion to help users install the binary or tar.<br>\nI had tweaked both of em a bit to make it work for Shelby’s requirements.   </p>\n<h4>The Email</h4>\n<p>One day morning, I e-mailed <a href=\"ttps://github.com/talal/\">@talal</a> since I used some of the source code from Mimir for bootstrapping the project. He was so happy to receive the Email and gave mesome much needed feedback for Shelby. Out of this was one to try out Goreleaser for deployment. So I went on try it. Some other feedback also came from one of my telegram group <a href=\"https://t.me/TinkerHub/6839\">TinkerHub</a> to change the default installation path.</p>\n<blockquote>\n<p>We’ll be using goreleaser to Deploy a Go application to GitHub Releases.I am writing this because the Docs were a bit confusing to me.</p>\n</blockquote>\n<hr>\n<h2>Setting Up Goreleaser and Travis CI</h2>\n<p>All the installation Instructions of Gorelaser can be found in their <a href=\"https://goreleaser.com/install/\">Official Docs</a>.<br>\nAfter Installing Goreleaser, you just have to <code class=\"language-text\">cd</code> to that go repository you want to deploy and run <code class=\"language-text\">goreleaser init</code>. This command will create a <code class=\"language-text\">goreleaser.yml</code> already filled with some commands and stuff.      </p>\n<p><strong>Here is the Gorelaser part to Deploy the Application to GitHUb Relases</strong>  </p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">github</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">owner</span><span class=\"token punctuation\">:</span> &lt;username<span class=\"token punctuation\">></span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> &lt;repo<span class=\"token punctuation\">></span></code></pre></div>\n<p>You can add this to the bottom of the <code class=\"language-text\">.gorealeaser.yml</code> file and it’ll work fine.</p>\n<p><strong>For Deploying to GitHub Releases Add this to your <code class=\"language-text\">.travis.yml</code> file</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> script\n  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> curl <span class=\"token punctuation\">-</span>sL https<span class=\"token punctuation\">:</span>//git.io/goreleaser <span class=\"token punctuation\">|</span> bash\n  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>This will only deploy to GitHub releases when a tag is created and pushed. You will need a GitHub Token in the Repo scope and while adding it to Travis Secrets you must name it like <code class=\"language-text\">GITHUB_TOKEN</code> only.</p>\n<hr>\n<h3>Some tips before pushing a tags for checking Goreleaser.</h3>\n<p>You can always try goreleaser in you the terminal. </p>\n<ul>\n<li>Try <code class=\"language-text\">goreleaser release --skip-publish</code> command and you can always test with this before you push to GitHub.\nI’d totally suggest this since I had simply pushed without any testing and I had to write the whole thing…again.</li>\n</ul>\n<hr>\n<h2>GoDownloader</h2>\n<p>You can install godownloader from their <a href=\"https://github.com/goreleaser/godownloader/releases\">releases page</a>. Follow the next steps to use it Globally</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ tar -xvf &lt;filename&gt;.tar.gz\n$ mv godownloader /usr/local/bin/</code></pre></div>\n<p>Now go to your working folder and run</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ godownloader --repo=&lt;user&gt;/&lt;repo&gt; &gt; godownloader.sh</code></pre></div>\n<p>This will make a <code class=\"language-text\">godownlaoder.sh</code> file which can be used as an installation script.</p>\n<hr>\n<h2>Here are my Pipelines</h2>\n<ul>\n<li><code class=\"language-text\">.travis.yml</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">sudo</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n<span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> go\n\n<span class=\"token key atrule\">go</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"1.13\"</span>\n<span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> go get <span class=\"token punctuation\">-</span>v\n  <span class=\"token punctuation\">-</span> go build\n  <span class=\"token punctuation\">-</span> rm <span class=\"token punctuation\">-</span>rf shelby\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># before we deploy, we go build for all operating systems we would like to support</span>\n<span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> script\n  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> curl <span class=\"token punctuation\">-</span>sL https<span class=\"token punctuation\">:</span>//git.io/goreleaser <span class=\"token punctuation\">|</span> bash\n  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">.goreleaser.yml</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">before</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">hooks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># you may remove this if you don't use vgo</span>\n    <span class=\"token punctuation\">-</span> go mod tidy\n    <span class=\"token comment\"># you may remove this if you don't need go generate</span>\n    <span class=\"token punctuation\">-</span> go get <span class=\"token punctuation\">-</span>v \n<span class=\"token key atrule\">builds</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> \n\n  <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> CGO_ENABLED=0\n  <span class=\"token key atrule\">ldflags</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span>s <span class=\"token punctuation\">-</span>w \n  <span class=\"token key atrule\">goos</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> darwin\n    <span class=\"token punctuation\">-</span> linux\n  <span class=\"token key atrule\">goarch</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> amd64\n<span class=\"token key atrule\">archives</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">replacements</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">darwin</span><span class=\"token punctuation\">:</span> Darwin\n    <span class=\"token key atrule\">linux</span><span class=\"token punctuation\">:</span> Linux\n    <span class=\"token key atrule\">amd64</span><span class=\"token punctuation\">:</span> x86_64\n<span class=\"token key atrule\">checksum</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name_template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'checksums.txt'</span>\n<span class=\"token key atrule\">snapshot</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name_template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ .Tag }}\"</span>\n<span class=\"token key atrule\">changelog</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">sort</span><span class=\"token punctuation\">:</span> asc\n  <span class=\"token key atrule\">filters</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">'^docs:'</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">'^test:'</span>\n<span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">github</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">owner</span><span class=\"token punctuation\">:</span> athul\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> shelby</code></pre></div>","frontmatter":{"title":"Go ❤️ Travis+Gorelaser","date":"January 05, 2020","description":"Using Travis CI with Goreleaser to Build and Deploy Your Go Applications to GitHub Releases and Godownloader to help users download your packages the easy way....🥳🥳🥳🥳🥳🥳🥳🥳🥳🥳"}}},"pageContext":{"slug":"/gorelaser/","previous":{"fields":{"slug":"/love-and-other/"},"frontmatter":{"title":"Love and Other......"}},"next":{"fields":{"slug":"/birthday/"},"frontmatter":{"title":"Call Your Friend"}}}}}